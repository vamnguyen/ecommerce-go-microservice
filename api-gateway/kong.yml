_format_version: "3.0"

services:
  - name: auth-service
    protocol: grpc
    host: host.docker.internal
    port: 9002
    routes:
      - name: auth-routes
        protocols:
          - http
          - https
        paths:
          - /api/v1/auth
        strip_path: false
        plugins:
          - name: grpc-gateway
            config:
              proto: /etc/kong/proto/auth.proto
          - name: cors
            config:
              origins:
                - "*"
              methods:
                - GET
                - POST
                - PUT
                - DELETE
                - PATCH
                - OPTIONS
              headers:
                - Authorization
                - Content-Type
                - X-User-ID
              exposed_headers:
                - X-Auth-Token
              credentials: true
              max_age: 3600
